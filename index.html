<!DOCTYPE html>
<html>
<head>
    <title>æ€æ‰‹å…”å…»æˆ</title>
    <style>
        body {
            background: #6b8c42;
            font-family: 'Pixel', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #game-container {
            background: #445533;
            padding: 20px;
            border: 4px solid #334422;
            margin-top: 30px;
        }
        .pixel-font {
            font-family: 'Pixel', monospace;
            color: white;
            text-shadow: 2px 2px #000;
        }
        .status-bar {
            background: #222;
            padding: 10px;
            margin: 10px 0;
        }
        button {
            background: #884444;
            border: 2px solid #552222;
            color: white;
            padding: 8px 16px;
            margin: 4px;
            cursor: pointer;
            font-family: 'Pixel', monospace;
        }
        button:hover {
            background: #aa6666;
        }
        canvas {
            border: 4px solid #334422;
            image-rendering: pixelated;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1 class="pixel-font">ğŸ”ª æ€æ‰‹å…”å…»æˆè®¡åˆ’ ğŸ”ª</h1>
        <canvas id="game-canvas" width="320" height="240"></canvas>
        <div class="status-bar pixel-font">
            é¥¥é¥¿å€¼: <span id="hunger">100</span><br>
            å¿ƒæƒ…å€¼: <span id="mood">100</span><br>
            æ¸…æ´åº¦: <span id="clean">100</span>
        </div>
        <div>
            <button onclick="feed()">å–‚èƒ¡èåœ</button>
            <button onclick="clean()">æ´—æ¾¡</button>
            <button onclick="play()">ç©åŒ•é¦–</button>
        </div>
    </div>

<script>
// æ¸¸æˆçŠ¶æ€
let bunnyState = {
    hunger: 100,
    mood: 100,
    clean: 100,
    isSleeping: false
};

// è·å–å…ƒç´ 
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');

// é¢„åŠ è½½èµ„æº
const bunnySprite = new Image();
bunnySprite.src = 'https://i.ibb.co/YTdRG0jr/FB88-BABA-F630-4-FC1-8-B9-F-599-DCE794-E0-C.jpg';

// åŠ¨ç”»çŠ¶æ€
let animationFrame = 0;
let earPosition = 0;

// æ¸¸æˆå¾ªç¯
function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
   Â 
    // ç»˜åˆ¶èƒŒæ™¯
    ctx.fillStyle = '#445533';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
   Â 
    // ç»˜åˆ¶æ€æ‰‹å…”
    ctx.drawImage(bunnySprite,Â 
        32 * animationFrame, 0, 32, 32,
        120, 80 + earPosition, 80, 80);
   Â 
    // è€³æœµåŠ¨ç”»
    if(Date.now() % 500 < 250) {
        earPosition = Math.sin(Date.now()/200) * 2;
    }
   Â 
    // æ›´æ–°çŠ¶æ€
    updateStatus();
    requestAnimationFrame(gameLoop);
}

// çŠ¶æ€æ›´æ–°
function updateStatus() {
    // è‡ªç„¶æ¶ˆè€—
    bunnyState.hunger = Math.max(0, bunnyState.hunger - 0.02);
    bunnyState.mood = Math.max(0, bunnyState.mood - 0.01);
    bunnyState.clean = Math.max(0, bunnyState.clean - 0.015);
   Â 
    // æ›´æ–°æ˜¾ç¤º
    document.getElementById('hunger').textContent = Math.floor(bunnyState.hunger);
    document.getElementById('mood').textContent = Math.floor(bunnyState.mood);
    document.getElementById('clean').textContent = Math.floor(bunnyState.clean);
   Â 
    // æ­»äº¡æ£€æµ‹
    if(bunnyState.hunger <= 0 || bunnyState.mood <= 0) {
        alert('æ€æ‰‹å…”å·²å›é€ƒï¼');
        location.reload();
    }
}

// äº’åŠ¨åŠŸèƒ½
function feed() {
    if(bunnyState.hunger < 100) {
        bunnyState.hunger += 15;
        animationFrame = 1;
        setTimeout(() => animationFrame = 0, 500);
        playSound('munch');
    }
}

function clean() {
    bunnyState.clean = Math.min(100, bunnyState.clean + 20);
    playSound('splash');
}

function play() {
    bunnyState.mood += 10;
    animationFrame = 2;
    setTimeout(() => animationFrame = 0, 1000);
    playSound('knife');
}

// éŸ³æ•ˆ
function playSound(type) {
    const audio = new Audio();
    audio.src = type === 'munch' ? 'https://assets.mixkit.co/active_storage/sfx/2792/2792-preview.mp3' :
               type === 'splash' ? 'https://assets.mixkit.co/active_storage/sfx/2433/2433-preview.mp3' :
               'https://assets.mixkit.co/active_storage/sfx/1063/1063-preview.mp3';
    audio.play();
}

// å¯åŠ¨æ¸¸æˆ
bunnySprite.onload = () => {
    gameLoop();
    setInterval(() => {
        animationFrame = (animationFrame + 1) % 3;
    }, 300);
};
</script>
</body>
</html>
